Quero transformar o M√©tricaClick em um sistema SaaS multiusu√°rio com acesso isolado entre empresas.

Antes de implementar, siga este processo:

---

### üîç Etapa 1 ‚Äì An√°lise e Planejamento

1. Analise toda a estrutura atual do projeto (frontend, backend, banco).
2. Avalie como as campanhas, scripts, m√©tricas, sincroniza√ß√µes e acessos est√£o associados atualmente.
3. Planeje como separar os dados de cada empresa de forma segura e escal√°vel.
4. Escreva todas as instru√ß√µes detalhadas em um arquivo chamado `Instructions-saas-multiuser.md`, contendo:

   - Relacionamentos entre usu√°rios e dados
   - Tabelas a serem criadas ou alteradas
   - Regras de autoriza√ß√£o e escopo
   - Camadas que precisam de adapta√ß√£o (API, frontend, banco)
   - Arquivos que ser√£o modificados

---

### üß© Requisitos para Multiusu√°rio

Crie um sistema de contas com **acesso isolado por empresa**, com os seguintes v√≠nculos:

1. **Login multiusu√°rio com autentica√ß√£o segura**
   - Autentica√ß√£o por e-mail e senha
   - Cria√ß√£o de conta de empresa (tenant)
   - Convite e gest√£o de usu√°rios por empresa (admin, editor etc.)

2. **Isolamento por Tenant**
   Cada empresa deve visualizar **apenas seus pr√≥prios dados**:
   - Campanhas
   - Scripts de tracking
   - M√©tricas e relat√≥rios
   - Convers√µes
   - Clicks
   - Sincroniza√ß√µes (ex: Facebook Ads)
   - Logs de acesso e eventos

3. **Permiss√µes e Acessos**
   Controle de pap√©is por usu√°rio:
   - `admin`: total acesso √† conta
   - `editor`: pode criar e editar campanhas, mas n√£o gerenciar usu√°rios
   - `viewer`: acesso somente leitura

4. **Identifica√ß√£o de Tenant**
   - Toda requisi√ß√£o √† API e renderiza√ß√£o de dashboard deve usar o `tenant_id` (empresa)
   - Associar dados existentes √† empresa logada (migra√ß√£o inicial pode assumir empresa padr√£o)

---

### üîê Seguran√ßa

- Proteja todos os endpoints com verifica√ß√£o de autentica√ß√£o
- Bloqueie acesso cruzado de dados entre empresas
- Use middleware para validar o `tenant_id` em todas as rotas de dados

---

### üíæ Estrutura recomendada (banco)

- `users` (com coluna `tenant_id`)
- `tenants` (empresas)
- `campaigns` (com `tenant_id`)
- `clicks`, `conversions`, `scripts`, `spends`, `integrations`, `logs` etc. ‚Üí todos com `tenant_id`

---

### üß™ Ap√≥s a an√°lise

No final da an√°lise, gere o arquivo `Instructions-saas-multiuser.md` contendo:

- Resumo da arquitetura SaaS
- Estrutura das tabelas com chaves de isolamento
- Middleware de autentica√ß√£o e escopo
- Lista de arquivos a serem modificados
- Notas de migra√ß√£o (como associar os dados j√° existentes √† primeira conta)

---

‚ö†Ô∏è **Importante**: n√£o inicie a implementa√ß√£o ainda. Apenas entregue o plano completo no arquivo `.md` para revis√£o e valida√ß√£o.
